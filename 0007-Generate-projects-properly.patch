From 2d1de34735ea0862a5e6e77d3089c845cd8d5ce6 Mon Sep 17 00:00:00 2001
From: Vijay Pai <vpai@google.com>
Date: Thu, 25 Jan 2018 09:01:53 -0800
Subject: [PATCH 7/7] Generate projects properly

---
 CMakeLists.txt | 9 ---------
 Makefile       | 2 ++
 build.yaml     | 2 +-
 3 files changed, 3 insertions(+), 10 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 3e1e7f2321..44af10888f 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -2635,15 +2635,6 @@ target_link_libraries(grpc++_core_stats
   grpc++
 )
 
-foreach(_hdr
-  src/cpp/util/core_stats.h
-)
-  string(REPLACE "include/" "" _path ${_hdr})
-  get_filename_component(_path ${_path} PATH)
-  install(FILES ${_hdr}
-    DESTINATION "${gRPC_INSTALL_INCLUDEDIR}/${_path}"
-  )
-endforeach()
 
 endif (gRPC_BUILD_TESTS)
 
diff --git a/Makefile b/Makefile
index 45005654ff..fd392007b5 100644
--- a/Makefile
+++ b/Makefile
@@ -4778,6 +4778,8 @@ LIBGRPC++_CORE_STATS_SRC = \
     $(GENDIR)/src/proto/grpc/core/stats.pb.cc $(GENDIR)/src/proto/grpc/core/stats.grpc.pb.cc \
     src/cpp/util/core_stats.cc \
 
+PUBLIC_HEADERS_CXX += \
+
 LIBGRPC++_CORE_STATS_OBJS = $(addprefix $(OBJDIR)/$(CONFIG)/, $(addsuffix .o, $(basename $(LIBGRPC++_CORE_STATS_SRC))))
 
 
diff --git a/build.yaml b/build.yaml
index 8bc49a3962..1097fd59ba 100644
--- a/build.yaml
+++ b/build.yaml
@@ -1332,7 +1332,7 @@ libs:
 - name: grpc++_core_stats
   build: private
   language: c++
-  public_headers:
+  headers:
   - src/cpp/util/core_stats.h
   src:
   - src/proto/grpc/core/stats.proto
-- 
2.14.3

